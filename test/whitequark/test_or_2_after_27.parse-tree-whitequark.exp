s(:begin,
  s(:def, :foo,
    s(:args,
      s(:kwoptarg, :foo,
        s(:block,
          s(:send, nil, :bar),
          s(:args),
          s(:lvar, :foo)))), nil),
  s(:block,
    s(:send, nil, :m),
    s(:args,
      s(:optarg, :foo,
        s(:block,
          s(:send, nil, :proc),
          s(:args),
          s(:send,
            s(:int, "1"), :+,
            s(:lvar, :foo))))), nil),
  s(:def, :foo,
    s(:args,
      s(:kwoptarg, :foo,
        s(:block,
          s(:send, nil, :bar),
          s(:args),
          s(:send, nil, :baz)))), nil),
  s(:block,
    s(:send, nil, :m),
    s(:args,
      s(:optarg, :foo,
        s(:block,
          s(:send, nil, :proc),
          s(:args),
          s(:send,
            s(:int, "1"), :+,
            s(:lvar, :bar))))), nil))
